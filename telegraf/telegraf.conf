[agent]
interval = "10s"
round_interval = true

[[outputs.influxdb_v2]]
urls = ["http://influxdb:8086"]
token = "${INFLUX_TOKEN}"
organization = "${INFLUX_ORG}"
bucket = "${INFLUX_BUCKET}"

[[inputs.cpu]]
totalcpu = true

[[inputs.mem]]

[[inputs.http_response]]
urls = ["http://flask-app:5000/health"]

[[inputs.tail]]
files = ["/app/logs/app.log"]
data_format = "grok"
grok_patterns = ["%{TIMESTAMP_ISO8601:timestamp} %{LOGLEVEL:level} %{GREEDYDATA:message}"]
